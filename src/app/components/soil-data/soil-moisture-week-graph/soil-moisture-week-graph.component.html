<h3>
  Average soil moisture
  <i
    class="ti ti-info-circle"
    (mouseover)="popover.show($event)"
    (mouseleave)="popover.hide()"
  ></i>
</h3>
@if (isLoadingChartData()) {
  <div [style]="{ margin: '.5rem' }">
    <chart-loader />
  </div>
} @else {
  <div class="chart-container">
    @if (isMobile()) {
      <p-card>
        <ng-container [ngTemplateOutlet]="chart"></ng-container>
      </p-card>
    } @else {
      <ng-container [ngTemplateOutlet]="chart"></ng-container>
    }
  </div>
}

<ng-template #chart>
  <p-chart
    [type]="moistureChartData().datasets[0].type"
    [data]="moistureChartData()"
    [options]="options()"
  />
</ng-template>

<p-popover #popover>
  <img
    src="https://support.spruceirrigation.com/wp-content/uploads/2015/09/FieldCapacity.png"
    [style.width]="isMobile() ? '350px' : '500px'"
  />
</p-popover>
