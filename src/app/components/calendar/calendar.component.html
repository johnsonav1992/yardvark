<div class="calendar-container">
  <header
    class="calendar-header"
    style="
      margin-bottom: 1rem;
      display: flex;
      align-items: center;
      justify-content: space-between;
    "
  >
    <h2 style="font-size: 1.25rem; font-weight: bold">
      {{ this.currentMonth() }}
    </h2>
    <div
      style="
        display: flex;
        align-items: center;
        gap: 0.5rem;
        font-size: 0.875rem;
      "
    >
      <button (click)="this.toCurrentMonth()">Today</button>
      <div style="display: flex; align-items: center; gap: 0.25rem">
        <button
          style="
            background-color: #3b82f6;
            padding: 0.5rem 1rem;
            border-radius: 0.375rem;
            color: white;
            cursor: pointer;
          "
          (click)="prevMonth()"
        >
          Previous Month
        </button>
        <button
          style="
            background-color: #3b82f6;
            padding: 0.5rem 1rem;
            border-radius: 0.375rem;
            color: white;
            cursor: pointer;
          "
          (click)="nextMonth()"
        >
          Next Month
        </button>
      </div>
    </div>
  </header>
  <div
    style="
      margin-top: 2.5rem;
      display: grid;
      grid-template-columns: repeat(7, 1fr);
      text-align: center;
      font-size: 0.75rem;
      line-height: 1.5rem;
      color: #6b7280;
    "
  >
    @for (item of this.dayNamesFormatted; track item.dayName) {
      <div
        [style.color]="item.isToday ? 'inherit' : '#9ca3af'"
        [style.fontWeight]="item.isToday ? '500' : '400'"
      >
        {{ item.dayName }}
      </div>
    }
  </div>
  <div
    class="calendar-grid"
    style="
      margin-top: 0.5rem;
      display: grid;
      grid-template-columns: repeat(7, 1fr);
      gap: 0.25rem;
      font-size: 0.875rem;
    "
  >
    @for (day of daysEnriched(); track day) {
      <div
        [style.gridColumnStart]="day.gridColumnStart"
        [style.marginInline]="'auto'"
        [style.position]="'relative'"
        [style.display]="'flex'"
        [style.flexDirection]="'column'"
        [style.alignItems]="'center'"
        [style.justifyContent]="'center'"
        [style.borderRadius]="'0.75rem'"
        [style.backgroundColor]="'#f8fafc'"
        [style.color]="day.isToday ? 'white' : '#9ca3af'"
        [style.fontWeight]="day.isToday ? '500' : '400'"
        [style.width]="'100%'"
        [style.height]="'6rem'"
      >
        <div style="flex: 1; width: 100%; padding: 0.5rem">
          @if (this.markerTpl(); as markerTpl) {
            <ng-container
              *ngTemplateOutlet="markerTpl; context: { $implicit: day.markers }"
            ></ng-container>
          }
        </div>
        <footer
          style="
            display: flex;
            height: 1.5rem;
            width: 1.5rem;
            align-items: center;
            justify-content: center;
            border-radius: 9999px;
            font-size: 0.875rem;
            position: absolute;
            bottom: 0.25rem;
            right: 0.25rem;
            background-color: white;
            border: 1px solid #e5e7eb;
          "
          [style.backgroundColor]="day.isToday ? '#3b82f6' : 'white'"
          [style.color]="day.isToday ? 'white' : 'inherit'"
        >
          {{ day.date | date: "d" }}
        </footer>
      </div>
    }
  </div>
</div>
