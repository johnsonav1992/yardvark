<page-container pageTitle="Soil data">
  @if (!userHasALocation()) {
    <p-card>
      <div class="no-loc-container">
        <h2>It looks like you haven't set your location yet!</h2>
        <p>
          Go to settings to set your location and start receiving soil
          temperature data.
        </p>
        <p-button
          label="Go to settings"
          icon="ti ti-settings"
          size="large"
          (click)="goToSettings()"
        />
      </div>
    </p-card>
  } @else {
    <div class="main-container">
      <p-card [style.width]="isMobile() ? '100%' : '49%'">
        <ng-template #title>Average soil temperatures</ng-template>
        <soil-temp-week-graph
          [dailyAverageShallowTemps]="dailyAverageShallowTemps()"
          [dailyAverageDeepTemps]="dailyAverageDeepTemps()"
          [isLoadingChartData]="isLoadingAveragesChartData()"
          [tempUnit]="tempUnit()"
        />
      </p-card>
      <p-card [style.width]="isMobile() ? '100%' : '49%'">
        <ng-template #title>
          Average soil moisture
          <i
            class="ti ti-info-circle"
            style="margin-left: 0.5rem; cursor: pointer;"
            (mouseover)="popover.show($event)"
            (mouseleave)="popover.hide()"
          ></i>
        </ng-template>
        <soil-moisture-week-graph
          [dailyMoistureData]="dailyMoistureData()"
          [isLoadingChartData]="isLoadingAveragesChartData()"
        />
      </p-card>
    </div>
  }
</page-container>

<p-popover #popover>
  <img
    src="https://support.spruceirrigation.com/wp-content/uploads/2015/09/FieldCapacity.png"
    [style.width]="isMobile() ? '350px' : '500px'"
  />
</p-popover>
